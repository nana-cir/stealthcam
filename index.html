<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Yahoo! JAPAN</title>
    <style>
        /* Yahoo!é¢¨ã®ãƒ‡ã‚¶ã‚¤ãƒ³å†ç¾ */
        body { margin: 0; padding: 0; font-family: "Hiragino Kaku Gothic ProN", Meiryo, sans-serif; background: #f5f5f5; color: #333; user-select: none; }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header { background: #fff; padding: 10px; border-bottom: 1px solid #ddd; display: flex; align-items: center; justify-content: space-between; }
        .y-logo { color: #ff0033; font-weight: bold; font-size: 1.5rem; letter-spacing: -1px; text-decoration: none; }
        .header-btn { font-size: 0.8rem; color: #333; border: 1px solid #ccc; padding: 5px 10px; border-radius: 4px; }

        /* æ¤œç´¢ãƒãƒ¼ */
        .search-area { background: #e1e1e1; padding: 10px; text-align: center; }
        .search-box { width: 95%; height: 35px; border-radius: 4px; border: 1px solid #ccc; padding-left: 10px; box-sizing: border-box; }

        /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆãƒ‹ãƒ¥ãƒ¼ã‚¹ä¸€è¦§ï¼‰ */
        .content { background: #fff; margin-top: 10px; padding: 0 10px; }
        .tab-menu { display: flex; border-bottom: 2px solid #ff0033; margin-bottom: 10px; }
        .tab-item { padding: 10px 15px; font-weight: bold; font-size: 0.9rem; color: #ff0033; }
        .tab-item.gray { color: #666; font-weight: normal; }

        .news-list { list-style: none; padding: 0; margin: 0; }
        .news-item { padding: 12px 0; border-bottom: 1px solid #eee; font-size: 0.95rem; line-height: 1.4; color: #333; }
        .news-item span { color: #999; font-size: 0.7rem; margin-left: 5px; }

        /* å½è£…ã•ã‚ŒãŸã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º */
        #rec-status-line { color: #333; } 
        
        /* é–‹å§‹å‰ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
        #start-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.95); z-index: 9999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .start-btn {
            background: #ff0033; color: white; border: none; padding: 15px 40px;
            font-size: 1.2rem; font-weight: bold; border-radius: 5px; cursor: pointer;
        }

        /* çµ‚äº†ãƒ»ä¿å­˜ç”»é¢ */
        #result-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; color: #fff; z-index: 10000; text-align: center; padding-top: 100px; }
        .save-btn { background: #06C755; color: white; padding: 20px; font-weight: bold; text-decoration: none; border-radius: 10px; font-size: 1.2rem; }
    </style>
</head>
<body>

    <div id="start-overlay">
        <h2 style="color:#333;">Y! JAPAN</h2>
        <p style="font-size:0.9rem; color:#666;">ã‚¿ãƒƒãƒ—ã—ã¦ãƒ›ãƒ¼ãƒ ã¸ç§»å‹•</p>
        <button class="start-btn" onclick="startFakeMode()">ã‚¢ã‚¯ã‚»ã‚¹</button>
        <p style="font-size:0.8rem; color:#999; margin-top:20px;">â€»èµ·å‹•ã¨åŒæ™‚ã«è£ã§éŒ²ç”»ã‚’é–‹å§‹ã—ã¾ã™</p>
    </div>

    <div id="fake-yahoo-screen">
        <header>
            <div class="y-logo">Y! JAPAN</div>
            <div class="header-btn">å¤©æ°—</div>
            <div class="header-btn">ãƒ¡ãƒ¼ãƒ«</div>
        </header>
        
        <div class="search-area">
            <input type="text" class="search-box" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢" disabled>
        </div>

        <div class="content">
            <div class="tab-menu">
                <div class="tab-item">ä¸»è¦</div>
                <div class="tab-item gray">åœ°åŸŸ</div>
                <div class="tab-item gray">çµŒæ¸ˆ</div>
            </div>
            
            <ul class="news-list">
                <li class="news-item">å¤§è°·ç¿”å¹³ 3è©¦åˆé€£ç¶šãƒ›ãƒ¼ãƒ ãƒ©ãƒ³<span>NEW</span></li>
                <li class="news-item">å°é¢¨æƒ…å ± é€±æœ«ã«é–¢æ±æ¥è¿‘ã®æã‚Œ<span>12:30</span></li>
                <li class="news-item">å††ç›¸å ´ ä¸€æ™‚145å††å°å¾ŒåŠã¸ä¸‹è½<span>çµŒæ¸ˆ</span></li>
                
                <li class="news-item" id="status-text" style="background:#fff0f0;">
                    ã€é‡è¦ã€‘éŒ²ç”»é€²è¡Œä¸­ ãƒ–ãƒ©ã‚¦ã‚¶é–‰ã˜ã‚‹ã¨åœæ­¢<span>ã‚·ã‚¹ãƒ†ãƒ </span>
                </li>

                <li class="news-item">ã‚³ãƒ³ãƒ“ãƒ‹æ–°ä½œã‚¹ã‚¤ãƒ¼ãƒ„ å£²ä¸Š1ä½ã¯<span>ãƒ©ã‚¤ãƒ•</span></li>
                <li class="news-item">æœ€æ–°AIæŠ€è¡“ãŒç”Ÿæ´»ã‚’å¤‰ãˆã‚‹å¯èƒ½æ€§<span>IT</span></li>
                <li class="news-item">ãƒ—ãƒ­é‡çƒ ä»Šæ—¥ã®è©¦åˆçµæœé€Ÿå ±<span>ã‚¹ãƒ</span></li>
            </ul>
            
            <div style="background:#ddd; height:100px; margin-top:20px; display:flex; align-items:center; justify-content:center; color:#888; font-size:0.8rem;">
                åºƒå‘Š [PR]
            </div>
        </div>
    </div>

    <div id="result-screen">
        <h2>éŒ²ç”»çµ‚äº†</h2>
        <p>è¨¼æ‹ ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¦ãã ã•ã„</p>
        <a id="download-link" class="save-btn">ğŸ“¥ å‹•ç”»ã‚’ä¿å­˜ã™ã‚‹</a>
        <br><br><br>
        <button onclick="location.reload()" style="background:#333; color:#aaa; border:none;">ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹</button>
    </div>

    <script>
        let mediaRecorder;
        let recordedChunks = [];
        let stream;

        // ãƒˆãƒªãƒ—ãƒ«ã‚¿ãƒƒãƒ—æ¤œçŸ¥ç”¨ã®å¤‰æ•°
        let tapCount = 0;
        let tapTimer;

        async function startFakeMode() {
            try {
                // ãƒªã‚¢ã‚«ãƒ¡ãƒ©(environment)èµ·å‹•
                stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: "environment" }, 
                    audio: true 
                });
            } catch (err) {
                alert("ã‚«ãƒ¡ãƒ©ã®è¨±å¯ãŒå¿…è¦ã§ã™");
                return;
            }

            // ç”»é¢åˆ‡ã‚Šæ›¿ãˆï¼ˆYahooé¢¨ç”»é¢ã‚’è¡¨ç¤ºï¼‰
            document.getElementById('start-overlay').style.display = 'none';

            // çµ‚äº†ãƒˆãƒªã‚¬ãƒ¼ï¼ˆç”»é¢å…¨ä½“ã®ã©ã“ã§ã‚‚ãƒˆãƒªãƒ—ãƒ«ã‚¿ãƒƒãƒ—ï¼‰
            document.body.addEventListener('click', handleTripleTap);
            document.body.addEventListener('touchstart', handleTripleTap);

            // éŒ²ç”»é–‹å§‹
            startRecording();
        }

        // ãƒˆãƒªãƒ—ãƒ«ã‚¿ãƒƒãƒ—åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
        function handleTripleTap(e) {
            tapCount++;
            clearTimeout(tapTimer);
            
            // 500ãƒŸãƒªç§’ä»¥å†…ã«æ¬¡ã®ã‚¿ãƒƒãƒ—ãŒãªã‘ã‚Œã°ãƒªã‚»ãƒƒãƒˆ
            tapTimer = setTimeout(() => {
                tapCount = 0;
            }, 500);

            if (tapCount === 3) {
                stopRecording(); // 3å›é€£æ‰“ã§åœæ­¢
                tapCount = 0;
            }
        }

        function startRecording() {
            recordedChunks = [];
            // Chromeæ¨å¥¨è¨­å®š (webm/vp9)
            let options = { mimeType: 'video/webm; codecs=vp9' };
            if (!MediaRecorder.isTypeSupported('video/webm; codecs=vp9')) {
                options = { mimeType: 'video/webm' }; // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
            }

            try {
                mediaRecorder = new MediaRecorder(stream, options);
            } catch (e) {
                mediaRecorder = new MediaRecorder(stream);
            }

            mediaRecorder.ondataavailable = (event) => {
                if (event.data.size > 0) recordedChunks.push(event.data);
            };

            mediaRecorder.onstop = () => {
                const blob = new Blob(recordedChunks, { type: 'video/webm' });
                const url = URL.createObjectURL(blob);
                const a = document.getElementById('download-link');
                
                const now = new Date();
                const filename = `evidence_${now.getFullYear()}${now.getMonth()+1}${now.getDate()}.webm`;
                
                a.href = url;
                a.download = filename;

                // ä¿å­˜ç”»é¢ã¸
                document.getElementById('result-screen').style.display = 'block';
                stream.getTracks().forEach(track => track.stop());
            };

            mediaRecorder.start();
        }

        function stopRecording() {
            if (mediaRecorder && mediaRecorder.state !== 'inactive') {
                mediaRecorder.stop();
            }
        }
    </script>
</body>
</html>
